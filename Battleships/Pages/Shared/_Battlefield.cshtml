@using ViewModels
@using Microsoft.EntityFrameworkCore;
@model BattlefieldPartialModel



@{
    foreach (var userGame in Model.Game.UserGames)
    {
        

        <h6>@Model._gl.GetUserName(userGame.UserId)</h6>


        if (Model.Game.GameState == Battleships.Models.Enums.GameState.Setup)
        {
            @*<table class="bftable">
                    @foreach (var item in userGame.NavyBattlePieces.OrderBy(x => x.PosX).ThenBy(x => x.PosY).Where(x => x.PosX == 0))
                    {
                        <tr>

                            @foreach (var item2 in userGame.NavyBattlePieces.OrderBy(x => x.PosX).ThenBy(x => x.PosY).Where(x => x.PosX == item.PosX))
                            {
                                if (item2.PieceState == Models.Enums.PieceState.Water)
                                {
                                    <td class="bftd bg-primary" style="color: white">
                                        <a asp-page-handler="PieceClick" asp-route-x="@item2.PosX" asp-route-y="@item2.PosY" asp-route-ug="@userGame.Id"><div style="width: 100%; height: 100%">@item2.PosX-@item2.PosY</div></a>
                                    </td>
                                }
                                if (item2.PieceState == Models.Enums.PieceState.Ship)
                                {
                                    <td class="bftd bg-dark" style="color: white">@item2.PosX - @item2.PosY</td>
                                }

                            }
                        </tr>
                    }
                </table>*@





            <table class="bftable">
                @for (int i = 0; i < Math.Sqrt(userGame.NavyBattlePieces.Count); i++)
                {
                    <tr>

                        @foreach (var item2 in userGame.NavyBattlePieces.Where(x => x.PosY == i))
                        {
                            if (item2.PieceState == Models.Enums.PieceState.Water)
                            {
                                <td class="bftd bg-primary" style="color: white">
                                    <a asp-page-handler="PieceClick" asp-route-x="@item2.PosX" asp-route-y="@item2.PosY" asp-route-ug="@userGame.Id"><div style="width: 100%; height: 100%">@item2.PosX-@item2.PosY</div></a>
                                </td>

                            }
                            if (item2.PieceState == Models.Enums.PieceState.Ship)
                            {
                                <td class="bftd bg-dark" style="color: white">@item2.PosX - @item2.PosY</td>
                            }

                        }
                    </tr>
                }
            </table>







        }
        else if (Model.Game.GameState == Battleships.Models.Enums.GameState.Battle)
        {

        }
        else if (Model.Game.GameState == Battleships.Models.Enums.GameState.Ending)
        {

        }
    }




}
